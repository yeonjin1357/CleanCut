# 광고 디버그 가이드

## 🔍 광고가 로드되지 않을 때 확인 사항

### 1. 콘솔 로그 확인하기
앱을 실행하고 콘솔에서 다음 메시지를 확인하세요:

```
===== AdMob 초기화 성공 =====
[HOME BANNER] 광고 로드 시작...
[INTERSTITIAL] 광고 로드 시작...
```

### 2. 에러 메시지별 해결 방법

#### Error Code: 0 - "네트워크 오류"
- 인터넷 연결 확인
- VPN 끄기
- 방화벽 설정 확인

#### Error Code: 1 - "잘못된 요청"
- 광고 ID가 올바른지 확인
- 테스트 ID: `ca-app-pub-3940256099942544/6300978111`

#### Error Code: 2 - "네트워크 오류"
- 네트워크 연결 상태 확인
- Wi-Fi/모바일 데이터 전환 시도

#### Error Code: 3 - "광고 인벤토리 없음"
- 테스트 광고인데도 이 에러가 나온다면:
  - 테스트 디바이스 ID 등록 필요
  - 콘솔에서 디바이스 ID 확인
  - `ad_service.dart`에 추가

#### Error Code: 8 - "이미 로드됨"
- 정상 작동 중
- 광고가 이미 로드된 상태

### 3. 테스트 디바이스 등록 방법

콘솔에서 다음과 같은 메시지 확인:
```
Use RequestConfiguration.Builder().setTestDeviceIds(Arrays.asList("YOUR_DEVICE_ID"))
```

`lib/services/ad_service.dart`에서:
```dart
testDeviceIds: <String>[
  'EMULATOR',
  'SIMULATOR',
  'YOUR_DEVICE_ID', // 여기에 추가
],
```

### 4. 일반적인 문제 해결

#### 광고가 가끔만 나타남
- **정상**: 광고 인벤토리는 항상 보장되지 않음
- **해결**: 테스트 광고 ID 사용 중인지 확인

#### "Already in Widget tree" 에러
- **원인**: 같은 광고를 여러 화면에서 사용
- **해결**: 각 화면별 별도 광고 인스턴스 생성 (이미 수정됨)

#### 에뮬레이터에서 광고 안 나옴
- **원인**: Google Play Services 없음
- **해결**: 
  1. Google Play 지원 에뮬레이터 사용
  2. 실제 디바이스에서 테스트

### 5. 프로덕션 체크리스트

실제 앱 출시 전:
- [ ] 실제 광고 ID로 교체
- [ ] AdMob 계정 생성 및 앱 등록
- [ ] 테스트 디바이스 ID 제거
- [ ] 디버그 로그 제거

### 6. 광고 수익 최적화

- **배너 광고**: 화면 하단 고정
- **전면 광고**: 작업 완료 후 표시
- **빈도**: 5-7회 작업마다 1회

### 7. 문제가 계속되면

1. `flutter clean` 실행
2. `flutter pub get` 실행
3. 앱 삭제 후 재설치
4. 다른 네트워크에서 테스트
5. 실제 디바이스에서 테스트